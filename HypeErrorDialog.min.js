/*
 Hype Error Dialog Extension v1.0.2
 Copyright (2024) Max Ziebell, (https://maxziebell.de). MIT-license
*/
'use strict';!1==="HypeErrorDialog"in window&&(window.HypeErrorDialog=function(){function p(){return-1!=window.location.href.indexOf("127.0.0.1:")&&-1!=window.location.href.indexOf("/preview/")&&0<=navigator.platform.toUpperCase().indexOf("MAC")}function q(){return-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch.")}function r(){const b=document.createElement("style");b.textContent=".custom-error-dialog {position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);background: linear-gradient(45deg, #f0f0f0, #ffffff);border: 1px solid black;border-radius: 10px;padding: 20px;z-index: 10000;font-family: 'Arial', sans-serif;box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);max-width: 600px;text-align: left;overflow: hidden;}.custom-error-dialog h2 {margin: 0 0 10px 0;font-size: 18px;color: red;}.custom-error-dialog pre {background: #f9f9f9;padding: 10px;border-radius: 5px;overflow-x: auto;white-space: pre-wrap;max-height: 200px;}.custom-error-dialog .close-btn {position: absolute;top: 10px;right: 10px;background: none;border: none;font-size: 20px;cursor: pointer;color: #ff0000;}.error-overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.2);z-index: 9999;}";
document.head.appendChild(b)}function l(b,d,g,e,m,c,f){var a=document.querySelector(".custom-error-dialog");a&&a.remove();a=document.createElement("div");a.className="error-overlay";document.body.appendChild(a);a=document.createElement("div");a.className="custom-error-dialog";a.innerHTML="<button class='close-btn' onclick='document.querySelector(`.custom-error-dialog`).remove(); document.querySelector(`.error-overlay`).remove();'>&times;</button><h2>JavaScript Error</h2><p><strong>Message:</strong> "+
b+"</p>"+(c?"<p><strong>Hype Document:</strong> "+c+"</p>":"")+(f?"<p><strong>Hype Function:</strong> "+f+"</p>":"")+"<p><strong>Source:</strong></p><pre>"+(d||"N/A")+"</pre>"+(g?"<p><strong>Line:</strong> "+g+"</p>":"")+(e?"<p><strong>Column:</strong> "+e+"</p>":"")+"<p><strong>Error Object:</strong></p><pre style='overflow-x: auto; white-space: pre;'>"+(m?m.stack:"N/A")+"</pre>";document.body.appendChild(a)}var h={};const t=p(),u=q();if(t&&!u){r();const b=window.eval;window.eval=function(d){const g=
"error-"+Math.random().toString(36).substr(2,9);if(/\(function\(\)\{return function\(hypeDocument, element, event\) \{/.test(d))try{return b(d)}catch(e){const m=new Function("/*"+g+"*/");requestAnimationFrame(function(){a:{var c=window.HYPE.documents;for(var f in c){var a=c[f].functions();for(k in a)if(a.hasOwnProperty(k)){var n=a[k].toString();if(-1!==n.indexOf(g)){c={docName:f,functionName:k,functionString:n};break a}}}c=null}a=c;f=c="";a&&(c=a.docName,f=a.functionName);a=e.message;var k=f;k=(n=
d.match(/\(function\(\)\{return function\(hypeDocument, element, event\) \{([\s\S]*?)\}\}\)\(\);/))&&n[1]?k+" (hypeDocument, element, event) {\n"+n[1]+"\n}":d;l(a,k,"","",e,c,f)});return m}else try{return b(d)}catch(e){throw l(e.message,d,"","",e),e;}};window.onerror=function(d,g,e,m,c){l(d,g,e,m,c)}}return{version:"1.0.2",setDefault:function(b,d){"object"===typeof b?h=Object.assign(h,b):h[b]=d},getDefault:function(b){return b?h[b]:h},isHypePreview:p,isHypeIDE:q,showErrorDialog:l}}(),window.onerror=
function(p,q,r,l,h){!HypeErrorDialog.isHypeIDE()&&HypeErrorDialog.isHypePreview()&&setTimeout(function(){HypeErrorDialog.showErrorDialog(p,q,r,l,h)},1)});
